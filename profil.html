<style>
    .teaser__content-meta-readtime,
 .teaser__content-meta,
 .article-teaser.text--intro,
 .headline.headline--1,
 .headline.headline--topline {
   display: none;
 }
</style>

<link rel="stylesheet" href="https://rawcdn.githack.com/imverlag/manager-ranking/4c5f13c9c1de35ebfcea16ed08ca58d0c120de9e/profil.css">


<div class="wrapper-full">
  <div class="navigation-bar">
    <a href="https://industriemagazin.at/top-manager/rangreihung" class="navigation-item">
      <span class="title">Die Rangreihung</span>
      <span class="description">Das Manager-Ranking im Überblick</span>
    </a>
    <a href="https://industriemagazin.at/top-manager/top-1000" class="navigation-item">
      <span class="title">Die TOP 1000</span>
      <span class="description">Die Datenbank der Führungskräfte</span>
    </a>
    <a href="https://industriemagazin.at/top-manager/die-manager" class="navigation-item active">
      <span class="title">Die Manager</span>
      <span class="description">Alle Führungskräfte in der Analyse</span>
    </a>
  </div>
  <div id="wrapper">
    <div id="profile-image-container">
      <img id="profile-image" src="">
    </div>
    <div id="rank"></div>
    <div id="name-container">
      <h1 id="full-name"></h1>
    </div>
  <div id="job-details">
  <div class="job-description-container">
    <p id="job-description"></p>
    <span class="vertical-line">|</span>
  </div>
  <p id="company-name"></p>
</div>
    <div id="descriptionContainer"></div>
    <div class="score-wrapper">
      <p id="user-description" class="user-description"></p>
    </div>
    <div class="score-wrapper">
      <h2 class="score-label">Gesamt-Punkte</h2>
      <div class="score-range">
        <div id="score-line" class="score-line"></div>
      </div>
      <p id="company-score" class="score-percent"></p>
    </div>
    <section class="layout">
      <div class="score-wrapper-small light-gray-background">
        <h2 class="score-label">Netzwerk</h2>
        <div class="score-range">
          <div id="networking-skills-line" class="score-line"></div>
        </div>
        <p id="networking-skills-score" class="score-percent"></p>
        <p class="score-description">Misst die Intensität der Verbindungen im Verhältnis zu den anderen Netzwerkteilnehmern.</p>
      </div>
      <div class="score-wrapper-small light-gray-background">
        <h2 class="score-label">Umsatz</h2>
        <div class="score-range">
          <div id="sales-line" class="score-line"></div>
        </div>
        <p id="sales-score" class="score-percent"></p>
        <p class="score-description">Misst die Summe der Umsätze – gewichtet nach der Managementfunktion.</p>
      </div>
      <div class="score-wrapper-small light-gray-background">
        <h2 class="score-label">Systemrelevanz</h2>
        <div class="score-range">
          <div id="risk-line" class="score-line"></div>
        </div>
        <p id="risk-score" class="score-percent"></p>
        <p class="score-description">Bildet die Abhängigkeitsverhältnisse in der Wertschöpfungskette ab.</p>
      </div>
      <div class="score-wrapper-small light-gray-background">
        <h2 class="score-label">Variabilität</h2>
        <div class="score-range">
          <div id="variability-score-line" class="score-line"></div>
        </div>
        <p id="variability-score" class="score-percent"></p>
        <p class="score-description">Misst die Diversität des Netzwerkes der Person.</p>
      </div>
    </section>
    <hr class="trennlinie">
    <div id="articles"></div>
    <script>
      // Fetch the JSON data from an external URL
      fetch('https://raw.githubusercontent.com/imverlag/manager-ranking/main/list_2023.json')
        .then(response => response.json())
        .then(data => {
         
          
          // DIE ID WIRD HIER MANUELL GEÄNDERT ###############
          const urlParams = new URLSearchParams(window.location.search);
          const userId = urlParams.get('id') || 15287; 
          // DIE ID WIRD HIER MANUELL GEÄNDERT ###############

          // Find the user object with the specified ID
          const user = data.find(user => user.id === parseInt(userId, 10));
          if (user) {
            // Set the profile image
            const profileImage = document.getElementById('profile-image');
            profileImage.src = user.image_url;
            // Set the rank
            const rankElement = document.getElementById('rank');
            rankElement.textContent = `Rang: ${user.rank}`;
            // Set the full name
            const fullNameElement = document.getElementById('full-name');
            fullNameElement.textContent = user.first_name + ' ' + user.last_name;
            // Set the job description
            const jobDescriptionElement = document.getElementById('job-description');
            jobDescriptionElement.textContent = user.job_description;
            // Set the company name
            const companyNameElement = document.getElementById('company-name');
            companyNameElement.textContent = user.company_name;
            // Set the user description
            const userDescriptionElement = document.getElementById('user-description');
            userDescriptionElement.textContent = user.description || '';
            // Set the overall score
            const overallScore = user.overall_score;
            const overallScoreLine = document.getElementById('score-line');
            overallScoreLine.style.width = `${overallScore}%`;
            // Set the overall score percent
            const overallScoreElement = document.getElementById('company-score');
            overallScoreElement.textContent = `${overallScore}%`;
            // Set the networking skills score
            const networkingSkillsScore = user.networking_skills_score;
            const networkingSkillsLine = document.getElementById('networking-skills-line');
            networkingSkillsLine.style.width = `${networkingSkillsScore}%`;
            // Set the networking skills score percent
            const networkingSkillsScoreElement = document.getElementById('networking-skills-score');
            networkingSkillsScoreElement.textContent = `${networkingSkillsScore}%`;
            // Set the sales score
            const salesScore = user.sales_score;
            const salesLine = document.getElementById('sales-line');
            salesLine.style.width = `${salesScore}%`;
            // Set the sales score percent
            const salesScoreElement = document.getElementById('sales-score');
            salesScoreElement.textContent = `${salesScore}%`;
            // Set the risk score
            const riskScore = user.risk_score;
            const riskLine = document.getElementById('risk-line');
            riskLine.style.width = `${riskScore}%`;
            // Set the risk score percent
            const riskScoreElement = document.getElementById('risk-score');
            riskScoreElement.textContent = `${riskScore}%`;
            // Set the variability score
            const variabilityScore = user.variability_score;
            const variabilityScoreLine = document.getElementById('variability-score-line');
            variabilityScoreLine.style.width = `${variabilityScore}%`;
            // Set the variability score percent
            const variabilityScoreElement = document.getElementById('variability-score');
            variabilityScoreElement.textContent = `${variabilityScore}%`;
            // Fetch and display articles
            async function fetchLatestArticles() {
              const url = 'https://industriemagazin.at/api';
              const bearerToken = 'i1papyZ-Coe1iQwiBuk7jj-_mMpDrUMi';
              const query = `
                  {
                      entries(limit: 10000, orderBy: "postDate DESC") {
                          title
                          teaser
                          url  
                          persons {
                              title
                          }
                      }
                  }
              `;
              const response = await fetch(url, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'Authorization': bearerToken
                },
                body: JSON.stringify({ query })
              });
              const data = await response.json();
              const filteredEntries = data.data.entries.filter(entry => 
                  entry.persons && entry.persons.some(person => person.title === user.first_name + ' ' + user.last_name)
              ).slice(0, 3); // Limit to 3 entries
              const articlesDiv = document.getElementById('articles');
              filteredEntries.forEach(entry => {
                const articleElement = document.createElement('div');
                articleElement.innerHTML = `
                    <h2 class="link-empfehlung"><a href="${entry.url}" target="_blank">${entry.title}</a></h2>
                    <p class="text-empfehlung">${entry.teaser}</p>
                `;
                articlesDiv.appendChild(articleElement);
              });
            }
            // Call the function to fetch and display articles
            fetchLatestArticles();
          }
        })
        .catch(error => {
          console.error('Error:', error);
        });
    </script>
  </div>
</div>
